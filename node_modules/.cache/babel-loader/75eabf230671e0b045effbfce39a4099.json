{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\DaneG\\\\My_Projects\\\\MY_IMDB\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\DaneG\\\\My_Projects\\\\MY_IMDB\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\DaneG\\\\My_Projects\\\\MY_IMDB\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\DaneG\\\\My_Projects\\\\MY_IMDB\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\DaneG\\\\My_Projects\\\\MY_IMDB\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\DaneG\\\\My_Projects\\\\MY_IMDB\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import{API_URL,API_KEY}from'../../config';import Navigation from'../elements/Navigation/Navigation';import MovieInfo from'../elements/MovieInfo/MovieInfo';import MovieInfoBar from'../elements/MovieInfoBar/MovieInfoBar';import FourColGrid from'../elements/FourColGrid/FourColGrid.js';import Actor from'../elements/Actor/Actor';import Spinner from'../elements/Spinner/Spinner';import'./Movie.css';var Movie=/*#__PURE__*/function(_Component){_inherits(Movie,_Component);function Movie(){var _getPrototypeOf2;var _this;_classCallCheck(this,Movie);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Movie)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={movie:null,actors:null,directors:[],loading:false};_this.fetchItems=function(endpoint){fetch(endpoint).then(function(result){return result.json();}).then(function(result){console.log(result);console.log(_this.state.movie);if(result.status_code){// If we don't find any movie\n_this.setState({loading:false});}else{_this.setState({movie:result},function(){// ...then fetch actors in the setState callback function\nvar endpoint=\"\".concat(API_URL,\"movie/\").concat(_this.props.match.params.movieId,\"/credits?api_key=\").concat(API_KEY);fetch(endpoint).then(function(result){return result.json();}).then(function(result){var directors=result.crew.filter(function(member){return member.job==='Director';});_this.setState({actors:result.cast,directors:directors,loading:false},function(){localStorage.setItem(\"\".concat(_this.props.match.params.movieId),JSON.stringify(_this.state));});});});}}).catch(function(error){return console.error('Error:',error);});};return _this;}_createClass(Movie,[{key:\"componentDidMount\",value:function componentDidMount(){if(localStorage.getItem(\"\".concat(this.props.match.params.movieId))){var state=JSON.parse(localStorage.getItem(\"\".concat(this.props.match.params.movieId)));this.setState(_objectSpread({},state));}else{this.setState({loading:true});// first fetch the movie\nvar endpoint=\"\".concat(API_URL,\"movie/\").concat(this.props.match.params.movieId,\"?api_key=\").concat(API_KEY,\"&language=en-US\");this.fetchItems(endpoint);}}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"rmdb-movie\"},this.state.movie?React.createElement(\"div\",null,React.createElement(Navigation,{movie:this.props.location.movieName}),React.createElement(MovieInfo,{movie:this.state.movie,directors:this.state.directors}),React.createElement(MovieInfoBar,{time:this.state.movie.runtime,budget:this.state.movie.budget,revenue:this.state.movie.revenue})):null,this.state.actors?React.createElement(\"div\",{className:\"rmdb-movie-grid\"},React.createElement(FourColGrid,{header:'Actors'},this.state.actors.map(function(element,i){return React.createElement(Actor,{key:i,actor:element});}))):null,!this.state.actors&&!this.state.loading?React.createElement(\"h1\",null,\"No Movie Found\"):null,this.state.loading?React.createElement(Spinner,null):null);}}]);return Movie;}(Component);export default Movie;","map":{"version":3,"sources":["C:/Users/DaneG/My_Projects/MY_IMDB/src/components/Movie/Movie.js"],"names":["React","Component","API_URL","API_KEY","Navigation","MovieInfo","MovieInfoBar","FourColGrid","Actor","Spinner","Movie","state","movie","actors","directors","loading","fetchItems","endpoint","fetch","then","result","json","console","log","status_code","setState","props","match","params","movieId","crew","filter","member","job","cast","localStorage","setItem","JSON","stringify","catch","error","getItem","parse","location","movieName","runtime","budget","revenue","map","element","i"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { API_URL, API_KEY } from '../../config';\r\nimport Navigation from '../elements/Navigation/Navigation'\r\nimport MovieInfo from '../elements/MovieInfo/MovieInfo';\r\nimport MovieInfoBar from '../elements/MovieInfoBar/MovieInfoBar';\r\nimport FourColGrid from '../elements/FourColGrid/FourColGrid.js';\r\nimport Actor from '../elements/Actor/Actor';\r\nimport Spinner from '../elements/Spinner/Spinner';\r\nimport './Movie.css';\r\n\r\nclass Movie extends Component {\r\n    state = {\r\n        movie: null,\r\n        actors: null,\r\n        directors: [],\r\n        loading: false\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (localStorage.getItem(`${this.props.match.params.movieId}`)) {\r\n            const state = JSON.parse(localStorage.getItem(`${this.props.match.params.movieId}`));\r\n            this.setState({ ...state })\r\n        } else {\r\n            this.setState({ loading: true })\r\n            // first fetch the movie\r\n            const endpoint = `${API_URL}movie/${this.props.match.params.movieId}?api_key=${API_KEY}&language=en-US`\r\n            this.fetchItems(endpoint);\r\n        }\r\n    }\r\n\r\n    fetchItems = (endpoint) => {\r\n        fetch(endpoint)\r\n            .then(result => result.json())\r\n            .then(result => {\r\n                console.log(result);\r\n                console.log(this.state.movie);\r\n                if (result.status_code) {\r\n                    // If we don't find any movie\r\n                    this.setState({ loading: false });\r\n                } else {\r\n                    this.setState({ movie: result }, () => {\r\n                        // ...then fetch actors in the setState callback function\r\n                        const endpoint = `${API_URL}movie/${this.props.match.params.movieId}/credits?api_key=${API_KEY}`\r\n                        fetch(endpoint)\r\n                            .then(result => result.json())\r\n                            .then(result => {\r\n                                const directors = result.crew.filter((member) => member.job === 'Director');\r\n\r\n                                this.setState({\r\n                                    actors: result.cast,\r\n                                    directors: directors,\r\n                                    loading: false\r\n                                }, () => {\r\n                                    localStorage.setItem(`${this.props.match.params.movieId}`, JSON.stringify(this.state))\r\n                                })\r\n                            })\r\n                    })\r\n                }\r\n\r\n            })\r\n            .catch(error => console.error('Error:', error))\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"rmdb-movie\">\r\n                {this.state.movie ?\r\n                    <div>\r\n                        <Navigation movie={this.props.location.movieName} />\r\n                        <MovieInfo movie={this.state.movie} directors={this.state.directors} />\r\n                        <MovieInfoBar time={this.state.movie.runtime} budget={this.state.movie.budget} revenue={this.state.movie.revenue} />\r\n                    </div>\r\n                    : null}\r\n                {this.state.actors ?\r\n                    <div className=\"rmdb-movie-grid\">\r\n                        <FourColGrid header={'Actors'} >\r\n\r\n                            {this.state.actors.map((element, i) => {\r\n                                return <Actor key={i} actor={element} />\r\n                            })}\r\n                        </FourColGrid>\r\n                    </div>\r\n                    : null}\r\n                {!this.state.actors && !this.state.loading ? <h1>No Movie Found</h1> : null}\r\n                {this.state.loading ? <Spinner /> : null}\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Movie;\r\n\r\n"]},"metadata":{},"sourceType":"module"}